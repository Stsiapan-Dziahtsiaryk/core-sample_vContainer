# Core для самых маленьких

-----------------

## Scene Management Overview

> Проект построен по принципу разделения ответственности между сценами для ускорения загрузки, упрощения поддержки и повышения гибкости разработки.

### Структура сцен
1. **Bootstrap Scene**
   * **Назначение:** Точка входа — минимальная, почти пустая сцена.
   * **Роль:** 
     + Быстрый показ первого кадра и запуск асинхронной загрузки остальных сцен.
     + Интеграция с внешними SDK до поднятия тяжёлых зависимостей (Firebase, Adjust).

   * **Почему так:**
     + Сокращает Time To Interactive на мобильных устройствах благодаря загрузке лёгкой сцены перед основной.
     + Единственный контейнер для инициализации систем, избегая дублирования в каждой сцене (EntryPointScene в коммерческих проектах).
2. **Enter Scene**

   * **Назначение:** Авторизация и предварительная настройка приложения.
   * **Содержимое:**
     + UI: кнопки входа/регистрации, ссылки на политику конфиденциальности.
     + Инициализация Game- и Account-менеджеров, аналитики, рекламы.
     + Прогрев ассетов для следующей сцены (preload).

   * **Почему так:**
     + Изолирует логику логина и подготовки среды, позволяя быстро фиксировать ошибки до загрузки геймплея.
     + Уменьшает задержки в Gameplay Scene за счёт фонового прогрева в отдельном потоке отличной от UI ветки.

3. Gameplay Scene 
   * **Назначение:** Основной игровой контент и механики.
   * **Содержимое:** Уровни, игровые объекты, HUD, игровая логика.
   * **Почему так:**
     + Чистая сцена без инфраструктурного кода делает её легковесной и быстрой при перезапуске (например, при рестарте уровня).
     + Позволяет перезагружать игровой процесс без повторной авторизации или инициализации SDK.

----------

## Project Module Structure

> Проект разделён на чёткие слои, каждый из которых отвечает за свою область ответственности. Такой подход упрощает поддержку, тестирование и масштабирование.

 ### Обзор модулей и зависимостей

| Модуль           | Назначение                                                                                                                 | Зависимости              |
|:-----------------|:---------------------------------------------------------------------------------------------------------------------------|:-------------------------|
| Domain           | Бизнес-логика: авторизация, работа с рекламой, доступ к базе данных и т. д.                                                | Shared                   |
| Infrastructure   | Регистрация и интеграция сервисов, управление состояниями (State Machine), DI Container и пр.                              | Domain, Shared, Gameplay |
| Gameplay         | Отображение и взаимодействие: UI, игровые объекты, ввод, анимации                                                          | Shared, Domain           |
| Shared           | Общие модели, интерфейсы, утилиты, константы                                                                               | -                        |

### **1. Shared**

Этот модуль не зависит ни от одного другого и содержит всего, что может понадобиться всем слоям.
* модели данных и DTO
* утилиты (расширения, конвертеры, логирование)
* константы и перечисления
* др. 

---------------

### **2. Domain**
Содержит «чистую» бизнес-логику без привязки к Unity API или внешним фреймворкам.
* интерфейсы репозиториев и сервисов
* реализация авторизации, работы с рекламой и БД
* покрытие модульными тестами
* др.
----------

### **3. Gameplay**
Отвечает за визуальную и интерактивную часть, опираясь на бизнес-логику из Domain.
* MonoBehaviour-компоненты и сцены
* UI, обработка ввода, анимации
* обращение к Domain для выполнения бизнес-операций
* др.
-----------

### **4. Infrastructure**
Связывает Domain, Gameplay и Shared с конкретными реализациями и платформенными зависимостями.
* регистрация сервисов в DI Container
* реализация интерфейсов Domain (REST-клиенты, кеш, локальное хранилище)
* организация State Machine и навигации
* интеграция с нативными SDK (Android, iOS, WebGL и пр.)
* расширения 
* др.
--------------------

